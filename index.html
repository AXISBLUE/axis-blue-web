<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AXIS BLUE — Web Online</title>
  <link rel="icon" href="assets/axis_logo.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="top">
    <div class="brand">
      <div class="title">AXIS BLUE — Web Online</div>
      <div class="subtitle">Private test environment • aptest.axisblue.io</div>
    </div>
    <div class="chips">
      <span class="chip">Environment: Test</span>
      <span class="chip">Data: Supabase</span>
      <span class="chip">Build: Static + Functions</span>
    </div>
  </header>

  <!-- LOCK SCREEN (only thing visible until auth succeeds) -->
  <main class="wrap">
    <section id="authCard" class="card">
      <h2>Authentication</h2>
      <p class="muted">Sign in to unlock the workflow. If auth fails, you'll see the reason.</p>

      <div class="grid">
        <label>
          <div class="label">Email</div>
          <input id="email" type="email" placeholder="you@domain.com" autocomplete="username" />
        </label>

        <label>
          <div class="label">Password</div>
          <input id="password" type="password" placeholder="••••••••" autocomplete="current-password" />
        </label>
      </div>

      <div class="row">
        <button id="btnSignIn" class="btn primary">Sign In</button>
        <button id="btnSignOut" class="btn" disabled>Sign Out</button>
        <span id="authState" class="muted small">Signed out</span>
      </div>

      <div id="authError" class="error" hidden></div>
    </section>

    <!-- APP (hidden until signed in) -->
    <section id="app" class="card" hidden>
      <h2>Run Day</h2>
      <p class="muted">You’re signed in. This section stays locked until auth succeeds.</p>

      <div class="divider"></div>

      <h3>Intelligence Capture</h3>

      <div class="grid2">
        <div class="panel">
          <h4>Barcode / QR Scan</h4>
          <p class="muted small">Uses your camera when supported. Fallback to manual entry if not.</p>

          <div class="row">
            <button id="btnStartScan" class="btn primary">Start Camera Scan</button>
            <button id="btnStopScan" class="btn" disabled>Stop</button>
          </div>

          <video id="video" playsinline muted></video>

          <label>
            <div class="label">Detected code</div>
            <input id="codeValue" type="text" placeholder="(auto-populates)" />
          </label>

          <label>
            <div class="label">Product name (manual)</div>
            <input id="productName" type="text" placeholder="Optional manual label" />
          </label>

          <label>
            <div class="label">Tag photo required</div>
            <input id="tagPhoto" type="file" accept="image/*" capture="environment" />
          </label>

          <div class="row">
            <button id="btnSaveCapture" class="btn primary">Save Capture</button>
            <span id="captureStatus" class="muted small"></span>
          </div>
        </div>

        <div class="panel">
          <h4>NFC (when available)</h4>
          <p class="muted small">Works only on devices/browsers that support Web NFC.</p>

          <div class="row">
            <button id="btnStartNfc" class="btn primary">Start NFC Scan</button>
            <button id="btnStopNfc" class="btn" disabled>Stop</button>
          </div>

          <div class="muted small" id="nfcStatus">Idle</div>

          <label>
            <div class="label">NFC payload</div>
            <textarea id="nfcPayload" rows="4" placeholder="(auto-populates)"></textarea>
          </label>
        </div>
      </div>

      <div class="divider"></div>

      <h3>Management Output</h3>
      <p class="muted small">Teams “send” needs an API/webhook. For now: copy + email draft works everywhere.</p>

      <label>
        <div class="label">Summary text</div>
        <textarea id="summary" rows="6" placeholder="Write a quick summary here..."></textarea>
      </label>

      <div class="row">
        <button id="btnCopySummary" class="btn">Copy Summary</button>
        <button id="btnEmailSummary" class="btn">Email Draft</button>
        <span id="mgmtStatus" class="muted small"></span>
      </div>
    </section>
  </main>

  <script type="module" src="supabaseClient.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
